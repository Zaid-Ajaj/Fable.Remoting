
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Model Shared API Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-enhanced-katex/katex.min.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
        <link rel="stylesheet" href="../styles/website.css">
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="suave.html" />
    
    
    <link rel="prev" href="../" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Scaffold from scratch</li>
        
        
    
        <li class="chapter active" data-level="2.1" data-path="modeling-api.html">
            
                <a href="modeling-api.html">
            
                    
                    Model Shared API
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="suave.html">
            
                <a href="suave.html">
            
                    
                    Setup Suave
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="giraffe.html">
            
                <a href="giraffe.html">
            
                    
                    Setup Giraffe
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="saturn.html">
            
                <a href="saturn.html">
            
                    
                    Setup Saturn
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.5" data-path="client.html">
            
                <a href="client.html">
            
                    
                    Setup Client
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Advanced</li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="route-builder.html">
            
                <a href="route-builder.html">
            
                    
                    Custom Route Paths
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="error-handling.html">
            
                <a href="error-handling.html">
            
                    
                    Error Handling
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="modeling-authentication.html">
            
                <a href="modeling-authentication.html">
            
                    
                    Modeling Authentication
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Model Shared API</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="model-shared-api">Model Shared API</h1>
<p>Before installing anything, you can start off by modeling an interface that represents your client-server interactions. The definition of this interface will be shared between the client and the server. Such interface is represented in F# as a record with the fields of the record being functions. </p>
<p>Suppose you are modelling an API for a music store, then it would look something like this:</p>
<pre><code class="lang-fs"><span class="hljs-comment">// SharedModels.fs</span>
<span class="hljs-keyword">module</span> ShareModels

<span class="hljs-keyword">open</span> System 

<span class="hljs-class"><span class="hljs-keyword">type</span> <span class="hljs-title">Album</span> </span>= {
    Id : int
    Title : string
    Genre : string
    Released : DateTime
}

<span class="hljs-comment">// The shared interface representing your client-server interaction</span>
<span class="hljs-class"><span class="hljs-keyword">type</span> <span class="hljs-title">IMusicStore</span> </span>= {
     allAlbums : unit -&gt; Async&lt;list&lt;Album&gt;&gt; 
     albumById : int -&gt; Async&lt;Option&lt;Album&gt;&gt;
     createAlbum : string -&gt; string -&gt; DateTime -&gt; Async&lt;Option&lt;Album&gt;&gt;
 }
</code></pre>
<p>As you can see, our interface is the <code>IMusicStore</code> record the fields of such record are functions of the shape:</p>
<pre><code>&apos;A -&gt; Async&lt;&apos;B&gt;
&apos;A -&gt; &apos;B -&gt; Async&lt;&apos;C&gt;
</code></pre><h2 id="provide-an-implementation">Provide an implementation</h2>
<p>On the server, you would provide an implementation of the above API. </p>
<pre><code class="lang-fs"><span class="hljs-keyword">let</span> musicStore : IMusicStore = {
    <span class="hljs-comment">// Db.getAllAlbums : unit -&gt; Async&lt;list&lt;Album&gt;&gt;</span>
    allAlbums = <span class="hljs-keyword">fun</span> () -&gt; Db.getAllAlbums() 
    albumById = <span class="hljs-keyword">fun</span> id -&gt; async { <span class="hljs-comment">(* implement here *)</span> }
    createAlbum = <span class="hljs-keyword">fun</span> title genre released -&gt; async { <span class="hljs-comment">(* you get the idea *)</span> }
}
</code></pre>
<p>Now you are almost ready to expose the API to your client and have these functions being callable directly. Start by setting up the server with your web framework of choice: </p>
<ul>
<li><a href="suave.html">Setup Suave</a></li>
<li><a href="giraffe.html">Setup Giraffe</a></li>
<li><a href="saturn.html">Setup Saturn</a></li>
</ul>
<p>Afterwards you can <a href="client.html">setup Fable Client</a> </p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="../" class="navigation navigation-prev " aria-label="Previous page: Introduction">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="suave.html" class="navigation navigation-next " aria-label="Next page: Setup Suave">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Model Shared API","level":"2.1","depth":1,"next":{"title":"Setup Suave","level":"2.2","depth":1,"path":"src/suave.md","ref":"src/suave.md","articles":[]},"previous":{"title":"Introduction","level":"1.1","depth":1,"path":"README.md","ref":"README.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["enhanced-katex"],"pluginsConfig":{"enhanced-katex":{},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css"}},"file":{"path":"src/modeling-api.md","mtime":"2018-03-14T15:02:41.601Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2018-03-14T16:47:21.967Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

